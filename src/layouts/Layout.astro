---
import { getLangFromUrl } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);

interface Props {
    title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html
    lang={lang}
    class=""
>
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width"
        />
        <link
            rel="icon"
            type="image/svg+xml"
            href="/favicon.svg"
        />
        <link
            rel="icon"
            type="image/png"
            href="/favicon-96x96.png"
            sizes="96x96"
        />

        <link
            rel="shortcut icon"
            href="/favicon.ico"
        />
        <link
            rel="apple-touch-icon"
            sizes="180x180"
            href="/apple-touch-icon.png"
        />
        <meta
            name="apple-mobile-web-app-title"
            content="Mark Rivera"
        />
        <link
            rel="manifest"
            href="/site.webmanifest"
        />
        <title>{title}</title>
        <meta
            name="description"
            content="Mark Portfolio - Software Developer"
        />
        <meta
            name="keywords"
            content="Mark Portfolio"
        />
        <meta
            name="author"
            content="Mark Rivera"
        />
        <meta
            name="robots"
            content="index, follow"
        />
        <meta
            name="googlebot"
            content="index, follow"
        />
        <meta
            name="bingbot"
            content="index, follow"
        />
        <meta
            name="yandexbot"
            content="index, follow"
        />

        <link
            rel="preconnect"
            href="https://fonts.googleapis.com"
        />
        <link
            rel="preconnect"
            href="https://fonts.gstatic.com"
            crossorigin
        />
        <link
            href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
            rel="stylesheet"
        />
        <script is:inline>
            if (
                localStorage.theme === 'dark' ||
                (!('theme' in localStorage) &&
                    window.matchMedia('(prefers-color-scheme: dark)').matches)
            ) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        </script>
        <script is:inline>
            const mediaQuery = window.matchMedia(
                '(prefers-color-scheme: dark)'
            );
            mediaQuery.addEventListener('change', (e) => {
                if (!localStorage.getItem('theme')) {
                    if (e.matches) {
                        document.documentElement.classList.add('dark');
                    } else {
                        document.documentElement.classList.remove('dark');
                    }
                }
            });
        </script>
    </head>

    <body>
        <div
            id="background-gradient"
            class="min-h-screen w-full"
        >
            <slot />
        </div>
    </body>
</html>

<style is:global>
    @import 'tailwindcss';

    @custom-variant dark (&:where(.dark, .dark *));

    body {
        font-family: 'Montserrat', sans-serif;
        font-size: 0.83em;
    }
</style>

<style>
    html,
    body {
        margin: 0;
        width: 100%;
        height: 100%;
        scroll-behavior: smooth;
    }

    body {
        background: #f7f9fc;
    }

    .dark body {
        background: #0f1115;
    }

    #background-gradient {
        background: radial-gradient(
            circle at top center,
            rgba(173, 216, 255, 0.45) 0%,
            rgba(255, 255, 255, 0.6) 40%,
            #f7f9fc 80%
        );
    }

    .dark #background-gradient {
        background: radial-gradient(
            circle at top center,
            rgba(0, 102, 255, 0.274) 0%,
            rgba(0, 102, 255, 0.05) 40%,
            #13151a 70%
        );
    }
</style>
